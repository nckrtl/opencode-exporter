services:
  opencode-exporter:
    build: .
    environment:
      OPENCODE_URL: http://host.docker.internal:4096
      OTEL_EXPORTER_OTLP_ENDPOINT: ${OTEL_EXPORTER_OTLP_ENDPOINT:-http://localhost:4317}
      EXPORT_INTERVAL: "10000"
      INSTANCE_ID: ${INSTANCE_ID:-}
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
